---
title: Music Recommendation System
author: Aditya Mangal
date: '2019-04-25'
slug: music-recommendation-system
categories:
  - Projects
tags:
  - DataAnalysis
  - DataScience
  - Visualizations
keywords:
  - tech
summary: Music Recommendation System using the [Last.fm Dataset](https://grouplens.org/datasets/hetrec-2011/)
readingtime: '15'
draft: yes
coverImage: https://lh3.googleusercontent.com/PM_9k2f_aBF6_x5etgQpZzGNcQ6s8YgPVuFiVXqwcKZU3pmy9xsxvZcpb-NFZA7g9xFr38jJSwtiB_AMApLB7YHvK-imvjD31zSAGmRHB5Wk7h593uyZ48OD6suGUhG5B8Mi_hwqw-DLauTIaLSctW5JK9X4-rw2m0WOVf8kQRxG7GggWvyuD8gg0Dyy-AtER3AdMn2jG7upYXYs63MT940AHq826hq36vz2_c99_gUrFGDnnjsN4YnlpDFTYwzyjvglGJjtWzrGYnEZbLNvG9ifYxtzELvXhTtTYKwVAufOi-88g1OtLrddcBgN_izobnCesRnANY4abdcSNs5rkb9_BpYMJGA6_yPAkd1Bte7yDFeMzQ0myZW5MhW9tx5ZXyX5c59nqRpVwRbrrfkQxg2HxhZPjRNeirCe7oWsvcqJnp3rXIIkv74EaD2Hm37A55A1Orj8TXWyfPAA3Ixo-HOiU-uLt2EWQKCWRX6kia8457VlE_OHmnfIBdD7smvL5OVvZv0BNoTmnamiLJL7WvyZftfanwUQmfjiaXyvgBnk3RbROuBsFh6Ep4sVIza18RV_Ftc2EGIlxYH2wxUndUTvGMrnjC-hfIK_sEgCbvQup6-SSYe0iC7w5BvT5IXvmg2eFd99fiRxlVTqr1qfSWpp6AxmcbIEjQHRVaBvqeVn05XcCFO22ZYoFienq6JhyXu5X6TmoI1HA_PXPsDY4iCXfg=w2602-h1734-no
thumbnailImage: https://lh3.googleusercontent.com/4YYTtIHwN3Fo0ZO64A3_vTJd9sPnN-Gt4aC6Ae6D-4Ll3pUIkPy6L_0kzA_b1snFGWvOqlijjnB7q9VhkGsytIHtZquOl9iGZcNizV46_o4p7xUl_wvFT8wW4LAAf6TzkHD_lklURhCujLczN6VZgwtfLmPJgV4AARu-jv3uDAm2lOL1wJLx1fizS_D6Ta7L3dQTUBM5hS6zu5xNrXNTQC1oTNnFhoYSsKkoVmtiZQB-CblkHxWdWk1C7iT80u8GfWpGv91EszIErFxR7_reyzc5ATE3PYcXo_IND77hu8HfVShEDo6zLTknQwZ4sf8QvPcIRWAnd3skB0bXliz-ktFhrxzwJvmf92cmUgGCEVCh6bCF35ABoi5kZv3DXXwFDGVQp_LHzx1bbLRj1o22EeJKCry03tJx8gMB9mP2XBhpnMW9rA0UhneMXweqqUwh7R2JFJhI8C8MmgwMiatV_cxQeZhYvKOFqd9ALGuo9mhdCCdYhXfiYP-DthpwTS427F6LutIap8Ky_yUqy66Anm6x4xOG4pSrKSYMoIF-V9Hbg02clR7DrZrPatY0iNvsiFboP7pw-njBqv_lXMXS_9ca33IiuJ1ZcrHJeA8wLzjh_R9uuoWJjRp8XIoGNEapyLbLLITc9bYChyNiP9bPNldpD2tqMXNC6mY2i2_oe_NsRCoZvr1C_ZVgYCHTH6ufc-e2PcKVHsEYdF2uOKw4F95-VQ=w750-h500-no
thumbnailImagePosition: top
comments: no
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE,error = FALSE)
```


# Introduction

Music Recommendation System using the [Last.fm Dataset](https://grouplens.org/datasets/hetrec-2011/)

# Analysis

## Load Libraries
```{r}
rm(list = ls())
library(tidyverse)
library(lubridate)
library(ggplot2)
library(gridExtra)

theme_set(theme_light())
```

## Obtain Data

```{r}
artists <- read_tsv("../data/hetrec2011-lastfm-2k/artists.dat")
tags <- read_tsv("../data/hetrec2011-lastfm-2k/tags.dat")
ratings <- read_tsv("../data/hetrec2011-lastfm-2k/user_artists.dat")
friends <- read_tsv("../data/hetrec2011-lastfm-2k/user_friends.dat")
user_tagged_artists <- read_tsv("../data/hetrec2011-lastfm-2k/user_taggedartists.dat")
```

Lets try and join all the data tables, into logical condensed tables.

```{r}
user_tagged_artists %>% 
  left_join(tags, by = c("tagID")) %>% 
  left_join(artists, by = c("artistID" = "id")) -> metadata
```

We will work with the final above 3 dataframes, metadata, ratings and friends. Lets drop the rest of them. 

```{r}
rm(artists, tags, user_tagged_artists)
```

```{r}
metadata %>% 
  glimpse()
```

```{r}
friends %>% 
  glimpse()
```

```{r}
ratings %>% 
  glimpse()
```

## Scrub and Explore

### Ratings

```{r}
ratings %>% 
  head()
```


Lets first make userID and artistID as factors.

```{r}
ratings %>% 
  mutate(userID = as.factor(userID),
         artistID = as.factor(artistID)) -> ratings
```

```{r}
ratings %>% 
  summary()
```

```{r fig.width=8}
ratings %>% 
  mutate(z_score_weight = scale(weight)) %>% 
  ggplot() -> p

grid.arrange(p + 
               geom_density(aes(x = weight), fill="#69b3a2", color="#e9ecef", alpha=0.7) +
               labs(x = "weight", y = "density", title = "Weight Density Distribution"), 
             p + 
               geom_density(aes(x = weight), fill="#69b3a2", color="#e9ecef", alpha=0.7)+
               scale_x_log10() + 
               labs(x = "log(weight)", y = "density", title = "log(Weight) Density Distribution"),
             p + 
               geom_density(aes(x = z_score_weight), fill="#69b3a2", color="#e9ecef", alpha=0.7)+
               labs(x = "z-score(weight)", y = "density", title = "z-score(Weight) Density Distribution"),
             p + 
               geom_density(aes(x = z_score_weight), fill="#69b3a2", color="#e9ecef", alpha=0.7)+
               scale_x_log10() + 
               labs(x = "z-score(log(weight))", y = "density", title = "z-score(log(Weight)) Density Distribution"))
```

```{r}
ratings %>% 
  mutate(log_weight = log10(weight),
         z_score_log_weight = scale(log_weight)) %>% 
  summary()
```

Using scaled (i.e. z-score) of log10 of weight field as the rating.

```{r}
ratings %>% 
  mutate(rating = scale(log10(weight))) -> ratings
```


<sub><i>Cover Photo by Malte Wingen on Unsplash</i></sub>
